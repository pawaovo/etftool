# ETF基金展示需求文档

## 1. 界面布局要求

### 1.1 大类资产分类栏
- 分类栏应该占据整行宽度（100%）
- 背景色与其他元素区分
- 包含资产图标、标题、份额信息
- 分类栏不应该与ETF卡片宽度对齐，应该填充整行

### 1.2 ETF卡片布局
- 每行显示3张ETF卡片
- 卡片宽度应保持一致，自动适应容器宽度
- 卡片之间保持固定间距（16px）
- 活跃卡片和已清仓卡片样式区分

### 1.3 卡片内容展示
#### 活跃ETF卡片（planUnit > 0）
- 显示完整信息：
  - 基金名称和代码
  - 最后操作日期
  - 份数/占比
  - 累计收益率
  - E大平均持有单价
  - E大历史最低单价
  - 最新净值
  - 现值对比平均单价
  - 现值对比历史最低单价

#### 已清仓ETF卡片（planUnit = 0）
- 显示简化信息：
  - 基金名称和代码
  - 份数/占比（显示"已清仓/0%"）
  - 累计收益率
  - 最新净值
- 使用灰色样式（disabled类）

### 1.4 ETF卡片排序规则
- 活跃ETF卡片优先显示，按照etf.json中的顺序排列
- 已清仓ETF卡片置于末尾
- 不允许重复显示相同的ETF卡片

## 2. 样式规范

### 2.1 颜色规范
- 正收益：绿色
- 负收益：红色
- 已清仓卡片：灰色

### 2.2 布局规范
- 分类栏：100%宽度
- 卡片容器：弹性布局（flex布局）
  - display: flex
  - flex-wrap: wrap
  - gap: 16px
- 卡片宽度：calc(33.33% - 11px)，考虑间距
- 卡片盒模型：border-box

### 2.3 响应式设计
- 大屏：每行3张卡片 - flex: 0 0 calc(33.33% - 11px)
- 中屏（<1200px）：每行2张卡片 - flex: 0 0 calc(50% - 8px)
- 小屏（<768px）：每行1张卡片 - flex: 0 0 100%

## 3. ETF卡片数据获取和处理规则

所有ETF卡片数据必须来自etf.json和adjust.json文件，不允许使用硬编码或模拟数据。每张ETF卡片从上到下依次展示9项数据，具体获取规则如下：

### 3.1 ETF卡片标题
- 获取规则：`{variety}-{fundName}`
- 数据来源：etf.json中对应基金的variety和fundName字段
- 示例：对于fundCode为100032的基金，标题为"中证红利-富国中证红利指数增强A"

### 3.2 基金代码
- 获取规则：直接显示fundCode
- 数据来源：etf.json中对应基金的fundCode字段
- 示例：对于fundCode为100032的基金，显示"100032"

### 3.3 最后操作
- 获取规则：使用etf.json中的fundCode在adjust.json中查找匹配记录，获取最新一条记录的操作类型和时间
- 数据来源：adjust.json中的comment和adjustTxnDate字段
- 时间转换：使用dateUtils.js中的convertTimestampToDate函数将时间戳转换为标准日期格式
- 示例：对于fundCode为100032的基金，最后操作为"卖出 (2024-03-07)"

### 3.4 份数/占比
- 获取规则：直接显示份数和百分比
- 数据来源：etf.json中对应基金的planUnit和percent字段
- 示例：对于fundCode为100032的基金，如果planUnit为13，percent为0.0824，则显示"13份/8.24%"

### 3.5 累计收益率
- 获取规则：显示百分比格式的累计收益率，包含正负号
- 数据来源：etf.json中对应基金的accProfit字段
- 示例：对于fundCode为100032的基金，如果accProfit为0.4889，则显示"+48.89%"

### 3.6 E大平均持有单价
- 获取规则：直接显示平均持有单价
- 数据来源：etf.json中对应基金的unitValue字段
- 示例：对于fundCode为100032的基金，如果unitValue为0.6071，则显示"0.6071"

### 3.7 E大历史最低单价
- 获取规则：使用etf.json中的fundCode在adjust.json中查找所有匹配记录，获取最低的nav值
- 数据来源：adjust.json中匹配记录的nav字段最小值
- 数据处理：使用getLowestNav.js中的逻辑查找历史最低净值
- 示例：对于fundCode为100032的基金，如果历史最低nav为0.5800，则显示"0.5800"

### 3.8 最新净值
- 获取规则：直接显示最新净值
- 数据来源：etf.json中对应基金的nav字段
- 示例：对于fundCode为100032的基金，如果nav为0.925，则显示"0.9250"

### 3.9 现值对比平均单价
- 计算规则：(最新净值-E大平均持有单价)/E大平均持有单价，显示为百分比
- 数据来源：使用etf.json中的nav和unitValue字段计算
- 示例：对于fundCode为100032的基金，如果nav为0.925，unitValue为0.6071，则计算得到"+52.36%"

### 3.10 现值对比历史最低单价
- 计算规则：(最新净值-E大历史最低单价)/E大历史最低单价，显示为百分比
- 数据来源：使用etf.json中的nav和上述计算的历史最低单价
- 示例：对于fundCode为100032的基金，如果nav为0.925，历史最低单价为0.5800，则计算得到"+59.48%"

## 4. A股资产组ETF卡片顺序（示例）
### 4.1 活跃基金（按顺序）
1. 富国中证红利指数增强A (100032)
2. 建信中证500指数增强A (000478)
3. 富国沪深300指数增强A (100038)
4. 华夏中证500ETF联接A (001052)
5. 广发医药卫生联接A (001180)
6. 广发养老指数A (000968)
7. 华宝医疗ETF联接C (012323)
8. 华夏上证50ETF联接A (001051)
9. 富国消费主题混合C (011309)
10. 富国消费主题混合A (519915)
11. 富国中证500指数增强A (161017)
12. 大摩健康产业混合A (002708)
13. 华宝医疗ETF联接A (162412)
14. 华夏沪深300ETF联接A (000051)
15. 广发中证全指金融地产联接A (001469)
16. 广发中证传媒ETF联接A (004752)
17. 广发创业板ETF联接A (003765)
18. 广发中证环保ETF联接A (001064)
19. 易方达中证全指证券公司指数(LOF)A (502010)
20. 融通健康产业灵活配置混合A (000727)

### 4.2 已清仓基金（置于末尾）
1. 易方达创业板ETF联接A (110026)
2. 广发信息技术联接A (000942)
3. 易方达信息产业混合A (001513)
4. 易方达消费行业 (110022)
5. 华夏沪深300ETF联接C (005658)
6. 广发中证500ETF联接C (002903)

## 5. 更新记录
- 2024-03-xx：初始版本
- 2024-03-xx：修复分类栏宽度问题
- 2024-03-xx：修复ETF卡片布局问题，修正了卡片每行显示和容器宽度问题
- 2024-03-xx：增加了响应式设计规范，确保在不同屏幕尺寸下正确显示
- 2024-03-xx：添加了A股资产组ETF卡片的具体展示顺序要求
- 2024-04-xx：添加了ETF卡片数据获取和处理规则，明确了所有数据必须来自etf.json和adjust.json 