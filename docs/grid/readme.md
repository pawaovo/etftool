## 网格策略页面 (`grid.html` & `grid-detail.html`) 开发指南

### 1. 项目概述

本部分的目标是开发一套用于展示和分析ETF网格交易策略的页面，包括：
- `grid.html`: 网格策略概览页面，展示总体信息和分类卡片列表。
- `grid-detail.html`: 网格策略详细信息页面，展示单个策略的详细数据、趋势图和可交互的交易/网格表格。

用户可以在概览页了解整体情况，点击卡片导航到详情页进行深入分析和参数模拟。

**重要：** UI风格、布局和交互应与 `150plan.html` 保持一致。

### 2. 相关文档

请务必仔细阅读 `docs/grid/` 目录下的文档：

- **`prd.md`**: 产品需求文档 (功能、展示内容、交互)。
- **`erd.md`**: 工程结构与数据结构设计 (文件结构、数据格式、**计算逻辑细节**)。
- **`todolist.md`**: 开发任务清单 (具体开发步骤)。

### 3. 技术栈与文件结构

- **主要页面**: `grid.html`, `grid-detail.html`
- **核心脚本**:
  - `js/grid-data.js`: 处理 `grid.html` 的数据加载、计算、渲染。
  - `js/grid-detail.js`: 处理 `grid-detail.html` 的数据接收/加载、计算、图表/表格渲染及交互。
- **样式**: 复用 `styles/plan-data.css`, `styles/etf-cards.css` 并按需补充。
- **数据源**:
  - `public/data/grid/*.json`: 各ETF策略的配置和历史交易记录。
  - `public/data/grid/latest_netvalues.json`: **(需生成)** 存储各ETF最新净值，由 `js/grid-data.js` (或独立脚本) 调用外部API生成。
- **依赖**: 可能需要图表库 (如 Chart.js, ECharts)。

### 4. 开发流程说明

请**严格按照 `docs/grid/todolist.md` 中定义的任务顺序**进行开发。

1.  **任务执行**: 聚焦 `todolist.md` 中的一个未完成项 (`[ ]`)。
2.  **代码实现**: 编写或修改相关文件。
3.  **代码注释**: 添加清晰注释，特别是JS中的计算逻辑。
4.  **更新 Todolist**: 完成后标记为 (`[✅]`)。
5.  **记录日志**: 将任务完成情况记录到 `docs/cursor-log.md`。
6.  **循环**: 重复步骤1-5。

**注意**:
- 遵循文档约定，保持代码风格。
- 遇到问题时记录并注明。
- 若需新增任务或重构，先在"AI建议任务区"提出。

### 5. 如何运行与测试

- 确保 `latest_netvalues.json` 文件存在且包含最新数据（可能需要先运行数据获取逻辑）。
- 在浏览器中打开 `grid.html`。
- 检查概览信息、卡片分类、排序、颜色是否正确。
- 点击卡片跳转到 `grid-detail.html`。
- 检查详情页顶部信息、图表（包括交互）、表格切换、交易明细、网格参数及档位详情是否按预期显示。
- 测试网格参数修改和表格重新生成功能。
- 测试响应式布局。

---

## 🧠 AI建议任务区
> 说明：AI主动建议新增的任务区。
- [ ] （待补充）【AI建议】：例如新增 `js/utils.js` 工具模块。

---

## 提醒：
- 严格按 `todolist.md` 顺序。
- 新增任务先入"AI建议任务区"。
- 完成任务更新 `todolist.md` 和 `cursor-log.md`。

请开始开发。

